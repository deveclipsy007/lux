# ========================================
# CONFIGURAÇÃO DE LOGGING - AGNO SDK AGENT GENERATOR
# ========================================
# Este arquivo define as configurações de logging para o sistema
# usando o formato de configuração padrão do Python

[loggers]
keys=root,agno,evolution,generator,api

[handlers]
keys=console,file,error_file,json_file

[formatters]
keys=detailed,simple,json

# ========================================
# CONFIGURAÇÃO DOS LOGGERS
# ========================================

[logger_root]
level=INFO
handlers=console,file
qualname=root

[logger_agno]
level=DEBUG
handlers=console,file
qualname=services.agno
propagate=0

[logger_evolution]
level=DEBUG
handlers=console,file
qualname=services.evolution
propagate=0

[logger_generator]
level=DEBUG
handlers=console,file
qualname=services.generator
propagate=0

[logger_api]
level=INFO
handlers=console,file,json_file
qualname=main
propagate=0

# ========================================
# CONFIGURAÇÃO DOS HANDLERS
# ========================================

# Handler para console (desenvolvimento)
[handler_console]
class=StreamHandler
level=INFO
formatter=simple
args=(sys.stderr,)

# Handler para arquivo principal
[handler_file]
class=handlers.RotatingFileHandler
level=DEBUG
formatter=detailed
args=('backend/logs/agno_generator.log', 'a', 10485760, 5, 'utf-8')

# Handler apenas para erros
[handler_error_file]
class=handlers.RotatingFileHandler
level=ERROR
formatter=detailed
args=('backend/logs/errors.log', 'a', 10485760, 3, 'utf-8')

# Handler para logs em formato JSON (produção/analytics)
[handler_json_file]
class=handlers.RotatingFileHandler
level=INFO
formatter=json
args=('backend/logs/api_requests.jsonl', 'a', 52428800, 10, 'utf-8')

# ========================================
# CONFIGURAÇÃO DOS FORMATTERS
# ========================================

# Formato detalhado para arquivos
[formatter_detailed]
format=%(asctime)s | %(levelname)-8s | %(name)s:%(funcName)s:%(lineno)d | correlation_id=%(correlation_id)s - %(message)s
datefmt=%Y-%m-%d %H:%M:%S

# Formato simples para console
[formatter_simple]
format=%(asctime)s | %(levelname)-8s | %(name)s | correlation_id=%(correlation_id)s - %(message)s
datefmt=%H:%M:%S

# Formato JSON para análise automatizada
[formatter_json]
format={"timestamp": "%(asctime)s", "level": "%(levelname)s", "logger": "%(name)s", "function": "%(funcName)s", "line": %(lineno)d, "correlation_id": "%(correlation_id)s", "message": "%(message)s"}
datefmt=%Y-%m-%dT%H:%M:%S

# ========================================
# CONFIGURAÇÕES ESPECÍFICAS POR AMBIENTE
# ========================================

# Para usar diferentes configurações baseadas no ambiente,
# defina a variável LOGGING_CONFIG_ENV:
#
# LOGGING_CONFIG_ENV=development (padrão)
# - Logs detalhados no console
# - Nível DEBUG para desenvolvimento
#
# LOGGING_CONFIG_ENV=production
# - Logs mais limpos
# - Apenas INFO+ no console
# - Foco em performance
#
# LOGGING_CONFIG_ENV=testing
# - Logs mínimos
# - Apenas erros críticos